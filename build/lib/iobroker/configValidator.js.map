{
  "version": 3,
  "sources": ["../../../src/lib/iobroker/configValidator.ts"],
  "sourcesContent": ["import { isValidIPv4 } from \"./utils\";\n\nexport function validateConfig(adapter: any): boolean {\n\tadapter.log.debug(\"Checking adapter settings...\");\n\n\t// --- Validate polling interval ---\n\tif (!adapter.config.pollingInterval || adapter.config.pollingInterval < 15) {\n\t\tadapter.config.pollingInterval = 15;\n\t\tadapter.log.warn(\"Polling interval can't be set lower than 15 seconds. Now set to 15 seconds.\");\n\t}\n\n\t// --- Validate devices array existence ---\n\tconst devices = adapter.config.devices;\n\tif (!devices || !Array.isArray(devices)) {\n\t\tadapter.log.error(\"No valid devices configured. Please add at least one device.\");\n\t\treturn false;\n\t}\n\n\t// --- Filter invalid devices ---\n\tconst cleanedDevices = devices.filter(d => d?.name?.trim() && d?.ip?.trim() && isValidIPv4(d.ip.trim()));\n\n\tif (cleanedDevices.length !== devices.length) {\n\t\tadapter.log.warn(\"Some device entries were invalid and have been removed.\");\n\t}\n\n\t// Update config\n\tadapter.config.devices = cleanedDevices;\n\n\t// --- Check if at least one valid device remains ---\n\tif (adapter.config.devices.length === 0) {\n\t\tadapter.log.error(\"No valid devices configured. Please add at least one device.\");\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAA4B;AAErB,SAAS,eAAe,SAAuB;AACrD,UAAQ,IAAI,MAAM,8BAA8B;AAGhD,MAAI,CAAC,QAAQ,OAAO,mBAAmB,QAAQ,OAAO,kBAAkB,IAAI;AAC3E,YAAQ,OAAO,kBAAkB;AACjC,YAAQ,IAAI,KAAK,6EAA6E;AAAA,EAC/F;AAGA,QAAM,UAAU,QAAQ,OAAO;AAC/B,MAAI,CAAC,WAAW,CAAC,MAAM,QAAQ,OAAO,GAAG;AACxC,YAAQ,IAAI,MAAM,8DAA8D;AAChF,WAAO;AAAA,EACR;AAGA,QAAM,iBAAiB,QAAQ,OAAO,OAAE;AAnBzC;AAmB4C,yCAAG,SAAH,mBAAS,aAAU,4BAAG,OAAH,mBAAO,eAAU,0BAAY,EAAE,GAAG,KAAK,CAAC;AAAA,GAAC;AAEvG,MAAI,eAAe,WAAW,QAAQ,QAAQ;AAC7C,YAAQ,IAAI,KAAK,yDAAyD;AAAA,EAC3E;AAGA,UAAQ,OAAO,UAAU;AAGzB,MAAI,QAAQ,OAAO,QAAQ,WAAW,GAAG;AACxC,YAAQ,IAAI,MAAM,8DAA8D;AAChF,WAAO;AAAA,EACR;AAEA,SAAO;AACR;",
  "names": []
}
